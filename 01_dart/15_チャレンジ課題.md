# **15_チャレンジ課題**

## **ゲームに挑戦**

ターミナル上で動く簡単なゲームを作ってみましょう

<br>

### **レベル１**  

|    |  ルール説明  |
| :----: | :---- |
|  1  | あなたはHP150の敵と戦います  |
|  2  | あなたの攻撃は続けて10回  |
|  3  | あなたの攻撃力は1回につき30以下で毎回ランダムで決定します（1回目：攻撃力10、2回目：攻撃力4・・・）  |
|  4  | 攻撃力とHPを「出力例」の通り表示する  |

<br>

### **出力例**  

```dart
> 攻撃開始
> 敵に30のダメージ　HPは120
> 敵に10のダメージ　HPは110
> 敵に20のダメージ　HPは90
> 敵に1のダメージ　HPは89
> 敵に30のダメージ　HPは59
> 敵に10のダメージ　HPは49
> 敵に15のダメージ　HPは34
> 敵に22のダメージ　HPは11
> 敵に29のダメージ　HPは-28
> 敵に10のダメージ　HPは-38
```

まずは、自分で考えてみよう！  
<br>

〜キーポイント〜

- 何を変数にする？
- 変数に入れる値はどうする？
- 習った文法を思い出そう（if for など）

<br>

難しい場合はヒントを見てみよう。

<br>

|    |  ヒント  |    |
| :----: | :---- | :---- |
|  1  | 変数は値が変化するもの  | 「敵のHP」 「攻撃力」  |
|  2  | 「敵のHP」には何が入る？  | 初期値は150 攻撃中は「攻撃力」を引いた数  |
|  3  | 「攻撃力」には何が入る？  | ランダム関数から取得　1~30の数字 |
|  4  | 文字列の連結はどうしたらよい？  | $変数を使う  |

<br><br><br>

|    |  もっとヒント  |
| :----: | :---- |
|  1  | 敵のHPを変数「hp」で宣言　初期値を150とする  |
|  2  | 攻撃力を変数「attack」で宣言　初期値を0とする  |
|  3  | for文を使って10回繰り返す  |
|  4  | for文の中の処理　→ ランダム関数を使って0~29の乱数を取得し＋１する、この値を「attack」に代入する  |
|  5  | 「hp」から「attack」を引く  |
|  6  | 結果を出力する $attack $hpを使って文字列を連結する |



<br><br><br>

## **解答例（レベル１）**
```dart
import 'dart:math';

void main() {
  var hp = 150; //敵のHP
  var attack = 0; //攻撃力

  print("攻撃開始");

  //攻撃を10回繰り返す
  for (var i = 0; i < 10; i++) {

    attack = Random().nextInt(30) + 1; //乱数取得後１を足す
    hp -= attack;
    //hp = hp - attack;でもよい
    print("敵に$attackのダメージ　HPは$hp");

  }
}

```

<br><br><br>

### **レベル2**  

★4★5を追加

|    |  ルール説明  |
| :----: | :---- |
|  1  | あなたはHP150の敵と戦います  |
|  2  | あなたの攻撃は続けて10回  |
|  3  | あなたの攻撃力は1回につき30以下、毎回ランダムで決定する  |
|  ★4  | 敵のHPが0以下になった時点で、「あなたの勝ち」と表示  |
|  ★5  | 最後まで敵のHPが残っていた場合、「あなたの負け」と表示  |

### **出力例（勝ちのとき）**  

```dart
> 攻撃開始
> 敵に30のダメージ　HPは120
> 敵に10のダメージ　HPは110
> 敵に20のダメージ　HPは90
> 敵に1のダメージ　HPは89
> 敵に30のダメージ　HPは59
> 敵に10のダメージ　HPは49
> 敵に15のダメージ　HPは34
> 敵に22のダメージ　HPは11
> 敵に29のダメージ　HPは-28
> あなたの勝ち

```

### **出力例（負けのとき）**  

```dart
> 攻撃開始
> 敵に30のダメージ　HPは120
> 敵に10のダメージ　HPは110
> 敵に20のダメージ　HPは90
> 敵に1のダメージ　HPは89
> 敵に30のダメージ　HPは59
> 敵に10のダメージ　HPは49
> 敵に15のダメージ　HPは34
> 敵に22のダメージ　HPは11
> 敵に5のダメージ　HPは6
> 敵に3のダメージ　HPは3
> あなたの負け

```

<br><br><br><br>

## **解答例（レベル２）**

```dart
import 'dart:math';

void main() {
  var hp = 150; //敵のHP
  var attack = 0; //攻撃力

  print("攻撃開始");

  for (var i = 0; i < 10; i++) {

    //hpが残っているときだけ攻撃する
    if (hp > 0) {
      attack = Random().nextInt(30) + 1;
      hp -= attack;
      print("敵に$attackのダメージ　HPは$hp");
    }

  }

  //forが終わった後にhpが残っているかどうか調べる
  if (hp <= 0) {
    print("あなたの勝ち");
  } else {
    print("あなたの負け");
  }
}
```

このプログラムの場合、hpが途中で０以下になって攻撃はしなくなるがfor文は最後まで繰り返されます。
最短5回で倒せても、残りの5回for文が動いていることになります。

for文を途中で止めるやり方もあります。  
最短5回で倒した後、for文が止まりfor文の後ろのプログラムを実行します。

```dart
import 'dart:math';

void main() {
  var hp = 150; //敵のHP
  var attack = 0; //攻撃力

  print("攻撃開始");

  for (var i = 0; i < 10; i++) {

    attack = Random().nextInt(30) + 1;
    hp -= attack;
    print("敵に$attackのダメージ　HPは$hp");

    //hpが0以下になった時点でfor文を止める
    if (hp <= 0) {
      break; //for文を止めて抜ける
    }

  }

  //forが終わった後にhpが残っているかどうか調べる
  if (hp <= 0) {
    print("あなたの勝ち");
  } else {
    print("あなたの負け");
  }
}
```
